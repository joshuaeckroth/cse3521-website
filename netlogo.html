<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>NetLogo</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="title" content="NetLogo"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2012-09-21 12:04:29 EDT"/>
<meta name="author" content="Joshua Eckroth"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="css/worg.css" type="text/css" media="screen" />
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>

<div id="preamble">
<a href="index.html">Home</a> &nbsp; &nbsp;
          <!-- Plupper Button -->
          <div id="plupperButton" style="display: inline;"></div>
          <!-- End of Plupper Button Code -->

</div>

<div id="content">
<h1 class="title">NetLogo</h1>

<p>You&rsquo;ll find the <a href="http://ccl.northwestern.edu/netlogo/docs/">NetLogo Manual</a> to be useful.
</p>
<p>
<a href="http://ccl.northwestern.edu/netlogo/5.0.1/">http://ccl.northwestern.edu/netlogo/5.0.1/</a>
</p>

<div id="table-of-contents">
<h2>TOC</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Building the &ldquo;ant brood sorting&rdquo; model</a>
<ul>
<li><a href="#sec-1-1">NetLogo code</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Building the &ldquo;ant brood sorting&rdquo; model</h2>
<div class="outline-text-2" id="text-1">


<p>
The model is described in the <a href="./ant-intelligence.html">Ant intelligence</a> notes.
</p>

</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1">NetLogo code</h3>
<div class="outline-text-3" id="text-1-1">



<div style="text-align: center">
<p><img src="./images/netlogo-ant-brood-sorting.png"  alt="./images/netlogo-ant-brood-sorting.png" />
</p>
</div>

<p>
Each turtle will have a <code>seen</code> variable that will be a list.
</p>



<pre class="src src-netlogo"><span style="color: #a020f0;">turtles-own</span> [ seen ]
</pre>


<p>
Each patch will have a <code>barrier?</code> variable that will be true or false
depending on whether the patch is a barrier.
</p>



<pre class="src src-netlogo"><span style="color: #a020f0;">patches-own</span> [ barrier? ]
</pre>


<p>
The &ldquo;setup&rdquo; button will run this procedure. First, the NetLogo
procedure <code>clear-all</code> clears the screen. Then, the <code>setup-patches</code> and
<code>setup-turtles</code> procedures (which we&rsquo;ll create) are executed.
</p>



<pre class="src src-netlogo"><span style="color: #a020f0;">to</span> <span style="color: #0000ff;">setup</span>
  clear-all
  setup-patches
  setup-turtles
<span style="color: #a020f0;">end</span>
</pre>


<p>
The patches will have colors or be black if they are blank space. The
probability of being some color or black depends on sliders. All
patches by default are not barriers.
</p>



<pre class="src src-netlogo"><span style="color: #a020f0;">to</span> <span style="color: #0000ff;">setup-patches</span>
  <span style="color: #a020f0;">ask</span> patches <span style="color: #b22222;">;; make each patch do the following</span>
  [ <span style="color: #a020f0;">set</span> barrier? false <span style="color: #b22222;">;; all start as non-barriers</span>
    <span style="color: #a020f0;">ifelse</span> random-float 1.0 &lt; red-prob <span style="color: #b22222;">;; possibly turn red</span>
    [ <span style="color: #a020f0;">set</span> pcolor red ]
    [ <span style="color: #a020f0;">ifelse</span> random-float 1.0 &lt; (red-prob + green-prob) <span style="color: #b22222;">;; possibly turn green</span>
      [ <span style="color: #a020f0;">set</span> pcolor green ]
      [ <span style="color: #a020f0;">ifelse</span> random-float 1.0 &lt; (red-prob + green-prob + blue-prob) <span style="color: #b22222;">;; possibly turn blue</span>
        [ <span style="color: #a020f0;">set</span> pcolor blue ]
        [ <span style="color: #a020f0;">set</span> pcolor black ] ] ] ] <span style="color: #b22222;">;; otherwise, not red, green, or blue</span>
<span style="color: #a020f0;">end</span>
</pre>


<p>
Now we set up the turtles (ants):
</p>



<pre class="src src-netlogo"><span style="color: #a020f0;">to</span> <span style="color: #0000ff;">setup-turtles</span>
  <span style="color: #a020f0;">create-turtles</span> population <span style="color: #b22222;">;; this is a slider variable</span>
  <span style="color: #a020f0;">ask</span> turtles 
  [ setxy 0 0 <span style="color: #b22222;">;; put each turtle (ant) in the middle</span>
    <span style="color: #a020f0;">set</span> seen [] <span style="color: #b22222;">;; set its "seen" list to the empty list</span>
    <span style="color: #a020f0;">set</span> color white ] <span style="color: #b22222;">;; make it white</span>
<span style="color: #a020f0;">end</span>
</pre>


<p>
The &ldquo;go&rdquo; button moves each ant around the space, avoiding barriers
(how to draw barriers is described below). An ant may choose to pickup
or drop a colored object if appropriate. But first we &ldquo;look&rdquo; by
updating the ant&rsquo;s &ldquo;seen&rdquo; list.
</p>



<pre class="src src-netlogo"><span style="color: #a020f0;">to</span> <span style="color: #0000ff;">go</span>
  <span style="color: #a020f0;">ask</span> turtles
  [ look
    drop
    pickup
    avoid-barrier ]
<span style="color: #a020f0;">end</span>
</pre>


<p>
This is how the ant &ldquo;looks&rdquo; (note that the <code>memory-size</code> variable is
set by a slider):
</p>



<pre class="src src-netlogo"><span style="color: #a020f0;">to</span> <span style="color: #0000ff;">look</span>
  <span style="color: #a020f0;">if</span> pcolor != black <span style="color: #a020f0;">and</span> memory-size &gt; 0 <span style="color: #b22222;">;; if the ant is on a color, and it has a memory</span>
  [ <span style="color: #a020f0;">if</span> length seen &gt;= memory-size <span style="color: #b22222;">;; if the seen list is full...</span>
    [ <span style="color: #a020f0;">set</span> seen but-last seen ] <span style="color: #b22222;">;; drop the last item in the list</span>
    <span style="color: #a020f0;">set</span> seen fput pcolor seen ] <span style="color: #b22222;">;; put the item seen now at the front of the list (fput)</span>
<span style="color: #a020f0;">end</span>
</pre>


<p>
The ant may choose to &ldquo;pickup&rdquo; an object. Picking up an object
actually just turns the patch to black, and turns the ant to the color
that it &ldquo;picked up.&rdquo;
</p>



<pre class="src src-netlogo"><span style="color: #a020f0;">to</span> <span style="color: #0000ff;">pickup</span>
  <span style="color: #b22222;">;; if the ant is white (not holding an object),</span>
  <span style="color: #b22222;">;; and the patch color (pcolor) is not black,</span>
  <span style="color: #b22222;">;; and the patch color is not white (which is a barrier)</span>
  <span style="color: #a020f0;">if</span> color = white <span style="color: #a020f0;">and</span> pcolor != black <span style="color: #a020f0;">and</span> pcolor != white
  <span style="color: #b22222;">;; then let f be the value (number of items in 'seen' list matching this color)</span>
  <span style="color: #b22222;">;; divided by the size of seen list;</span>
  <span style="color: #b22222;">;; we use 'filter [? = pcolor] seen' to reduce the 'seen' list to only</span>
  <span style="color: #b22222;">;; those items that equal the patch color</span>
  [ <span style="color: #a020f0;">let</span> f (length (filter [? = pcolor] seen)) / (length seen)
    <span style="color: #b22222;">;; now choose a random number, and see if it is less than</span>
    <span style="color: #b22222;">;; the value (K+ / (K+ + F))^2 where K+ is a constant set by a slider</span>
    <span style="color: #a020f0;">if</span> random-float 1.0 &lt; (k-plus / (k-plus + f)) ^ 2
    [ <span style="color: #a020f0;">set</span> color pcolor <span style="color: #b22222;">;; set ant color to patch color</span>
      <span style="color: #a020f0;">set</span> pcolor black ] ] <span style="color: #b22222;">;; set patch color to black</span>
<span style="color: #a020f0;">end</span>
</pre>


<p>
Dropping is the opposite:
</p>



<pre class="src src-netlogo"><span style="color: #a020f0;">to</span> <span style="color: #0000ff;">drop</span>
  <span style="color: #b22222;">;; if the ant is not white (i.e., if it is holding an object),</span>
  <span style="color: #b22222;">;; and the patch color is black</span>
  <span style="color: #a020f0;">if</span> color != white <span style="color: #a020f0;">and</span> pcolor = black
  <span style="color: #b22222;">;; figure out how many seen objects have the same color as the ant</span>
  [ <span style="color: #a020f0;">let</span> f (length (filter [? = color] seen)) / (length seen)
    <span style="color: #b22222;">;; calculate (F / (K- + F))^2 where K- is a constant set by a slider</span>
    <span style="color: #a020f0;">if</span> random-float 1.0 &lt; (f / (k-minus + f)) ^ 2
    [ <span style="color: #a020f0;">set</span> pcolor color <span style="color: #b22222;">;; set patch color to color of ant</span>
      <span style="color: #a020f0;">set</span> color white ] ] <span style="color: #b22222;">;; change ant color back to white</span>
<span style="color: #a020f0;">end</span>
</pre>


<p>
Now we just need to make the ant move:
</p>



<pre class="src src-netlogo"><span style="color: #a020f0;">to</span> <span style="color: #0000ff;">avoid-barrier</span>
  <span style="color: #b22222;">;; if there exists a patch ahead (in whatever direction the ant is facing)</span>
  <span style="color: #b22222;">;; and the patch ahead is not a barrier</span>
  <span style="color: #b22222;">;; (the code ([barrier?] of patch-ahead 1) gets the value of the barrier?</span>
  <span style="color: #b22222;">;; variable for the patch)</span>
  <span style="color: #a020f0;">if</span> (nobody != patch-ahead 1) <span style="color: #a020f0;">and</span> ([barrier?] of patch-ahead 1)
    [right 90 + random 180] <span style="color: #b22222;">;; then turn 90-degrees plus a random amount more</span>
  right random 40 <span style="color: #b22222;">;; turn a random amount</span>
  forward 1 <span style="color: #b22222;">;; move forward; note, we may have turned towards a different barrier; oh well</span>
<span style="color: #a020f0;">end</span>
</pre>


<p>
The &ldquo;make-barrier&rdquo; and &ldquo;remove-barrier&rdquo; buttons on the interface call
these two procedures. These procedures figure out where you click your
mouse and set the <code>barrier?</code> variable to true/false on those patches
(and turn them white/black):
</p>



<pre class="src src-netlogo"><span style="color: #a020f0;">to</span> <span style="color: #0000ff;">make-barrier</span>
  <span style="color: #a020f0;">if</span> mouse-down? <span style="color: #b22222;">;; continually ask if the mouse is being clicked</span>
  [ <span style="color: #a020f0;">ask</span> patches <span style="color: #b22222;">;; for all patches that are under the mouse, ...</span>
    [ <span style="color: #a020f0;">if</span> ((abs (pxcor - mouse-xcor)) &lt; 1) <span style="color: #a020f0;">and</span> ((abs (pycor - mouse-ycor)) &lt; 1)
      [ <span style="color: #a020f0;">set</span> pcolor white <span style="color: #b22222;">;; turn white</span>
        <span style="color: #a020f0;">set</span> barrier? true ] ] ] <span style="color: #b22222;">;; and set barrier? to true</span>
<span style="color: #a020f0;">end</span>

<span style="color: #a020f0;">to</span> <span style="color: #0000ff;">remove-barrier</span>
  <span style="color: #a020f0;">if</span> mouse-down?
  [ <span style="color: #a020f0;">ask</span> patches
    [ <span style="color: #a020f0;">if</span> ((abs (pxcor - mouse-xcor)) &lt; 1) <span style="color: #a020f0;">and</span> ((abs (pycor - mouse-ycor)) &lt; 1)
      [ <span style="color: #a020f0;">set</span> pcolor black
        <span style="color: #a020f0;">set</span> barrier? false ] ] ]
<span style="color: #a020f0;">end</span>
</pre>


<div style="font-size: 80%;">
<span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">CSE 3521 material</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://cse3521.artifice.cc" property="cc:attributionName" rel="cc:attributionURL">Joshua Eckroth</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>. Source code for this website available at <a href="https://github.com/joshuaeckroth/cse3521-website">GitHub</a>.
</div>

<!-- Plupper Tracking Code -->
<script src="https://www.google.com/jsapi"></script>
<script type="text/javascript"
    src="https://static.plupper.com/js/plupper.js"></script>
<script type="text/javascript">
    plupper.init("joshuaeckroth@plupper.com");
    plupper.enableCobrowsing();
</script>
<!-- End of Plupper Tracking Code -->



</div>
</div>
</div>
</div>

</body>
</html>
